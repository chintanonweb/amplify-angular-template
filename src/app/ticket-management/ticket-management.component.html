<!-- <div class="container-fluid h-100">
    <div class="row">
        <div class="col-md-3">
            <button (click)="createTicket()" class="btn btn-danger">+ new</button>
        </div>
        <div class="col-md-9">
            <div class="row">
                @if(loading){
                <div class="w-100 h-100 d-flex align-items-center justify-content-center">
                    <div class="spinner-border text-danger" role="status">
                        <p class="visually-hidden">Loading...</p>
                    </div>
                </div>
                }
                @if(!loading){
                <div class="col-md-3">
                    <div class="bg-light h-100 rounded p-3">
                        <p class="text-secondary mb-2 fs-6">BACKLOG</p>
                        @for (ticket of tickets; track $index) {
                        <div class="card shadow-sm border-0 mb-3">
                            <div class="card-header bg-white">
                                <h6 class="card-title mb-0">Ticket title</h6>
                            </div>
                            <div class="card-body">
                                <p class="card-text">{{ ticket.content }}</p>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-secondary px-2 p-1 me-1"
                                        (click)="deleteTodo(ticket.id)">
                                        <i class="fa-solid fa-pen-to-square"></i></button>
                                    <button type="button" class="btn btn-danger px-2 p-1 text-end"
                                        (click)="deleteTodo(ticket.id)"><i class="fa-solid fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                        }
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="bg-light h-100 rounded p-3">
                        <p class="text-secondary mb-2 fs-6">READY FOR DEVELOPMENT</p>
                        @for (ticket of tickets; track $index) {
                        <div class="card shadow-sm border-0 mb-3">
                            <div class="card-header bg-white">
                                <h6 class="card-title mb-0">Ticket title</h6>
                            </div>
                            <div class="card-body">
                                <p class="card-text">{{ ticket.content }}</p>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-secondary px-2 p-1 me-1"
                                        (click)="deleteTodo(ticket.id)">
                                        <i class="fa-solid fa-pen-to-square"></i></button>
                                    <button type="button" class="btn btn-danger px-2 p-1 text-end"
                                        (click)="deleteTodo(ticket.id)"><i class="fa-solid fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                        }
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="bg-light h-100 rounded p-3">
                        <p class="text-secondary mb-2 fs-6">IN PROGRESS</p>
                        @for (ticket of tickets; track $index) {
                        <div class="card shadow-sm border-0 mb-3">
                            <div class="card-header bg-white">
                                <h6 class="card-title mb-0">Ticket title</h6>
                            </div>
                            <div class="card-body">
                                <p class="card-text">{{ ticket.content }}</p>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-secondary px-2 p-1 me-1"
                                        (click)="deleteTodo(ticket.id)">
                                        <i class="fa-solid fa-pen-to-square"></i></button>
                                    <button type="button" class="btn btn-danger px-2 p-1 text-end"
                                        (click)="deleteTodo(ticket.id)"><i class="fa-solid fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                        }
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="bg-light h-100 rounded p-3">
                        <p class="text-secondary mb-2 fs-6">DONE</p>
                        @for (ticket of tickets; track $index) {
                        <div class="card shadow-sm border-0 mb-3">
                            <div class="card-header bg-white">
                                <h6 class="card-title mb-0">Ticket title</h6>
                            </div>
                            <div class="card-body">
                                <p class="card-text">{{ ticket.content }}</p>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-secondary px-2 p-1 me-1"
                                        (click)="deleteTodo(ticket.id)">
                                        <i class="fa-solid fa-pen-to-square"></i></button>
                                    <button type="button" class="btn btn-danger px-2 p-1 text-end"
                                        (click)="deleteTodo(ticket.id)"><i class="fa-solid fa-trash"></i></button>
                                </div>
                            </div>
                        </div>
                        }
                    </div>
                </div>
                }
            </div>
        </div>
    </div>
</div> -->
<!-- src/app/ticket-list/ticket-list.component.html -->
<div class="container-fluid">
    <div class="row">
        <div class="col">
            <form (ngSubmit)="saveTicket()">
                <div class="mb-3">
                  <label for="title" class="form-label">Title</label>
                  <input [(ngModel)]="ticketData.title" name="title" class="form-control" id="title" required>
                </div>
            
                <div class="mb-3">
                  <label for="description" class="form-label">Description</label>
                  <textarea [(ngModel)]="ticketData.description" name="description" class="form-control" id="description"></textarea>
                </div>
            
                <div class="mb-3">
                  <label for="assignee" class="form-label">Assignee</label>
                  <input [(ngModel)]="ticketData.assignee" name="assignee" class="form-control" id="assignee" required>
                </div>
            
                <div class="mb-3">
                  <label for="priority" class="form-label">Priority</label>
                  <select [(ngModel)]="ticketData.priority" name="priority" class="form-select" id="priority">
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                  </select>
                </div>
            
                <div class="mb-3">
                  <label for="status" class="form-label">Status</label>
                  <select [(ngModel)]="ticketData.status" name="status" class="form-select" id="status">
                    <option value="backlog">Backlog</option>
                    <option value="ready">Ready for Development</option>
                    <option value="inprogress">In Progress</option>
                    <option value="block">Block</option>
                    <option value="test">Test</option>
                    <option value="done">Done</option>
                  </select>
                </div>
            
                <button type="submit" class="btn btn-primary">Save</button>
              </form>
        </div>
        @for (status of statuses; track $index) {
        <div class="col">
            <h4 class="text-center">{{ status }}</h4>
            @for (ticket of tickets[status]; track $index) {
            <div class="card mb-2">
                <div class="card-body">
                    <h5 class="card-title">{{ ticket.title }}</h5>
                    <p class="card-text">{{ ticket.description }}</p>
                    <p>Assignee: {{ ticket.assignee }}</p>
                    <p>Priority: {{ ticket.priority | titlecase }}</p>
                    <button class="btn btn-warning btn-sm me-2" (click)="editTicket(ticket)" data-bs-toggle="modal" data-bs-target="#ticketModal">Edit</button>
                    <button class="btn btn-danger btn-sm" (click)="deleteTicket(ticket.id)">Delete</button>
                </div>
            </div>
            }
        </div>
        }
    </div>
</div>
<div class="modal fade" id="ticketModal" tabindex="-1" aria-labelledby="ticketModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ticketModalLabel">{{ isEditMode ? 'Edit Ticket' : 'Add Ticket' }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="resetForm()"></button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="saveTicket()">
            <div class="mb-3">
              <label for="modal-title" class="form-label">Title</label>
              <input [(ngModel)]="ticketData.title" name="title" class="form-control" id="modal-title" required>
            </div>

            <div class="mb-3">
              <label for="modal-description" class="form-label">Description</label>
              <textarea [(ngModel)]="ticketData.description" name="description" class="form-control" id="modal-description"></textarea>
            </div>

            <div class="mb-3">
              <label for="modal-assignee" class="form-label">Assignee</label>
              <input [(ngModel)]="ticketData.assignee" name="assignee" class="form-control" id="modal-assignee" required>
            </div>

            <div class="mb-3">
              <label for="modal-priority" class="form-label">Priority</label>
              <select [(ngModel)]="ticketData.priority" name="priority" class="form-select" id="modal-priority">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="modal-status" class="form-label">Status</label>
              <select [(ngModel)]="ticketData.status" name="status" class="form-select" id="modal-status">
                <option value="backlog">Backlog</option>
                <option value="ready">Ready for Development</option>
                <option value="inprogress">In Progress</option>
                <option value="block">Block</option>
                <option value="test">Test</option>
                <option value="done">Done</option>
              </select>
            </div>

            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Save</button>
          </form>
        </div>
      </div>
    </div>
  </div>